(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},107:function(e,t,n){e.exports=n.p+"static/media/rooms-white.1e9cdb15.svg"},108:function(e,t,n){e.exports=n(222)},113:function(e,t,n){},114:function(e,t,n){},163:function(e,t){},172:function(e,t,n){},173:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),s=n.n(r),l=(n(113),n(1)),i=n(3),c=n(6),u=n(4),m=n(5),p=(n(114),n(24)),d=n.n(p),h=function e(){var t=this;Object(l.a)(this,e),this.getAllRooms=function(){return t.service.get("getAllRooms",{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.getOneRoom=function(e){return t.service.get("getOneRoom/".concat(e),{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.postRoom=function(e){return t.service.post("newRoom",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.updateRoom=function(e,n){return t.service.put("updateRoom/".concat(e),n).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.handleUpload=function(e){return t.service.post("/upload",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.service=d.a.create({baseURL:"".concat("https://rooms-ih.herokuapp.com/api/","rooms/")})},g=function e(){var t=this;Object(l.a)(this,e),this.getAllUsers=function(){return t.service.get("getAllUsers",{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.updateUser=function(e,n){return t.service.put("updateUser/".concat(e),n).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.updateFollowing=function(e,n,a){return console.log("0000000000000000000000000000000000000000000000000000000000000 "),t.service.put("updateFollowing",{roomId:e,userId:n,action:a}).then(function(e){return console.log("THEN---------------------------------------------------------")}).catch(function(){return console.log("111111111111111111111111111111111111111111111111111111")})},this.postUser=function(e){return t.service.post("newUser",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getOneUser=function(e){return t.service.get("getOneUser/".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.service=d.a.create({baseURL:"".concat("https://rooms-ih.herokuapp.com/api/","users/")})},f=(n(70),n(71),n(10)),v=n(25),b=n(26);function E(){var e=Object(v.a)(["\n  text-align: ",";\n \n\n\n"]);return E=function(){return e},e}function w(){var e=Object(v.a)(["\n  background: ",";\n  border-radius: 10px;\n  padding: 4px 8px;\n  margin-top: 10px;\n  display: inline-block;\n  text-align: ",";\n  max-height: 571px;\n"]);return w=function(){return e},e}var y=b.a.div(w(),function(e){return e.server?"gray":"green"},function(e){return e.server?"left":"right"}),O=b.a.div(E(),function(e){return e.server?"left":"right"}),j=function(e){var t=e.children,n=e.server,a=void 0!==n&&n;return o.a.createElement(O,{server:a,className:"messageWrapper"},o.a.createElement(y,{server:a},t))};function C(){var e=Object(v.a)(["\n  width: 20%;\n  padding: 5px;\n  font-size: 20px;\n  box-sizing: border-box;\n  display: inline-block;\n  text-align: center;\n  background: tomato;\n  color: white;\n  user-select: none;\n  cursor: pointer;\n  border-radius:13px;\n"]);return C=function(){return e},e}function k(){var e=Object(v.a)(["\n  width: 80%;\n  padding: 5px;\n  font-size: 20px;\n  box-sizing: border-box;\n  border: 0;\n  border-radius:13px;\n  @media (max-width: 400px) {  \n    width: 207px;\n    }\n  @media (min-width:460) and (max-width: 568px){  \n    width: 278px;\n    }\n  // @media (min-width: 400px) and (max-width: 451px) {  \n  //   width: 51%;\n  //   }\n"]);return k=function(){return e},e}var S=b.a.input(k()),N=b.a.a(C()),U=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={text:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"send",value:function(){var e=this.state.text,t=this.props.newMessage;t?(console.log("Sending message: ".concat(e)),t(e)):console.log("Missing callback"),this.setState({text:""})}},{key:"render",value:function(){var e=this,t=this.state.text;return o.a.createElement("div",{className:"input-chat"},o.a.createElement(S,{value:t,onKeyPress:function(t){"Enter"===t.key&&e.send()},onChange:function(t){e.setState({text:t.target.value})}}),o.a.createElement(N,{onClick:function(){return e.send()}},"Send"))}}]),t}(a.Component),R=n(48),I=n(102);function x(){var e=Object(v.a)(["\n  //border: 1px solid white;\n  padding: 0px 0px 0px 0px;\n  width: 500px;\n  max-height:500px;\n  overflow-y: scroll;\n\n"]);return x=function(){return e},e}var T=n.n(I)()("https://rooms-ih.herokuapp.com"),M=b.a.div(x()),L=Object(R.c)("messages","setMessages",[]),W=Object(R.b)({componentDidMount:function(){var e=this.props,t=e.messages,n=e.setMessages;console.log("Chat Ready"),T.emit("create","room1",function(e){console.log("Mensaje del servidor: ".concat(e)),t.push({type:"server",msg:e}),n(t)}),T.on("front",function(e){console.log("Mensaje del servidor: ".concat(e)),t.push({type:"server",msg:e}),n(t)})}}),_=Object(R.a)(L,W)(function(e){var t=e.messages,n=e.setMessages;return o.a.createElement("div",{className:"chat-container"},o.a.createElement("div",{className:"message-container"},o.a.createElement(M,null,t.map(function(e,t){var n=e.type,a=e.msg;return o.a.createElement(j,{server:"server"===n,key:t},a)}))),o.a.createElement(U,{newMessage:function(e){T.emit("mensajeria",e),t.push({type:"me",msg:e}),n(t)}}))}),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={room:{},user:{}},n.roomServices=new h,n.userServices=new g,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.roomServices.getOneRoom(this.props.match.params.id).then(function(t){e.setState({room:t}),e.userServices.getOneUser(e.state.room.owner).then(function(t){e.setState({user:t}),console.log(e.state.user)})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"room"},o.a.createElement("div",{className:"videoplayer"},o.a.createElement("div",{className:"video"},o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/uTnFrh6CyK4",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"room-card-container"},o.a.createElement("h1",{className:"roomname"},this.state.room.roomname),o.a.createElement("div",{className:"room-header"},o.a.createElement("div",{className:"room-icons"},o.a.createElement("p",null,o.a.createElement(f.a,{icon:"user",className:"profile-icon"})," ",void 0!==this.state.user.username?this.state.user.username:null),o.a.createElement("p",null,o.a.createElement(f.a,{icon:"heart",className:"like-button"})," ",this.state.room.likes?this.state.room.likes:"0"),o.a.createElement("p",null,o.a.createElement(f.a,{icon:"eye",className:"like-button"})," ",this.state.room.views?this.state.room.views:"0")),o.a.createElement("div",{className:"room-button-container"},o.a.createElement("button",{className:"button-follow"},"Follow"),o.a.createElement("button",{className:"button-like"},o.a.createElement(f.a,{icon:"heart",className:"like-button"}))))),o.a.createElement("p",null,this.state.room.description),o.a.createElement("p",null,this.state.room.tags),o.a.createElement("div",{className:"followers-streams"},o.a.createElement("p",null,"Followers: ",this.state.room.followers===[]?this.state.room.followers:"0"),o.a.createElement("p",null,"Streams: ",this.state.room.streams?this.state.room.streams:"0")))),o.a.createElement("div",{className:"chat"},o.a.createElement("div",{className:"box-chat"},o.a.createElement(_,null))))}}]),t}(a.Component),D=n(7),F=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.service=d.a.create({baseURL:"https://rooms-ih.herokuapp.com/api/",withCredentials:!0})},P=n(29),z=n(14),B=(a.Component,n(62)),H=n.n(B),Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).logout=function(){n.service.logout().then(function(e){return n.props.setTheUser(null)})},n.service=new F,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.userInSession?(console.log(this.props.userInSession),o.a.createElement("div",{className:"header-absolute"},o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:H.a,alt:"rooms"}),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("p",null,"Hi ",this.props.userInSession.username,"!")),o.a.createElement("li",null,o.a.createElement(D.b,{to:"/profile/".concat(this.props.userInSession._id)},"Your Profile")),o.a.createElement("li",null," ",o.a.createElement(D.b,{to:""},o.a.createElement("div",{onClick:this.logout},"Sign Out"))))))):o.a.createElement("div",{className:"header-absolute"},o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:H.a,alt:"rooms"}),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(D.b,{to:"/signup"},"Sign Up")),o.a.createElement("li",null," ",o.a.createElement(D.b,{to:"/login"},"Log In")))))}}]),t}(a.Component),K=(n(172),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},n.services=new F,n.roomServices=new h,n.userServices=new g,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.loggedInUser.username),console.log(this.props.loggedInUser),this.roomServices.getOneRoom(this.props.match.params.id).then(function(t){e.setState({room:t}),e.userServices.getOneUser(e.state.room.owner).then(function(t){e.setState({user:t})})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"profile-container"},o.a.createElement("div",{className:"profileHeader"},o.a.createElement("img",{className:"profile-pic",src:this.props.loggedInUser.imageUrl}),o.a.createElement("h1",{className:"roomname"},this.props.loggedInUser.username)),o.a.createElement("div",{className:"box box-profile"},o.a.createElement("div",{className:"room-header"},o.a.createElement("h1",null,"Your Room:"),o.a.createElement("p",null,this.props.loggedInUser.room===[]?this.props.loggedInUser.room:"You don't have a room yet"),o.a.createElement("div",{className:"room-icons"}))),o.a.createElement("div",{className:"box box-profile"},o.a.createElement("div",{className:"room-header"},o.a.createElement("h1",null,"Following:"),o.a.createElement("p",null,this.props.loggedInUser.room===[]?this.props.loggedInUser.following:"You don't follow any rooms"))))}}]),t}(a.Component)),V=n(105),G=n(28),J=function(e){var t=e.component,n=e.user,a=Object(V.a)(e,["component","user"]);return o.a.createElement(G.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(t,Object.assign({},e,{loggedInUser:n})):o.a.createElement(G.a,{to:{pathname:"/"}})}}))},q=(n(173),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.state.username||n.setState({usernameCheck:!0}),n.state.password||n.setState({passwordCheck:!0}),n.setState(Object(z.a)({},a,o))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.services.signup(a,o).then(function(e){n.setState({username:"",password:""}),n.props.setTheUser(e),window.location.href="/map"}).catch(function(e){console.log("**** Error de signup",e.response.data.message),n.setState({error:e.response.data.message})})},n.state={username:"",password:"",error:!1},n.services=new F,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"validation",value:function(){if(console.log(this.state.error),!1!==this.state.error)return o.a.createElement("div",{className:"alert alert-warning"},o.a.createElement("p",null,this.state.error))}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-form"},o.a.createElement("div",null,o.a.createElement("h1",null,"Sign Up"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:this.validation(),id:"username",name:"username",placeholder:"User Name"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:this.validation(),id:"password",name:"password",placeholder:"Password"})),o.a.createElement("button",{type:"submit",className:"signup-link"},"Sign Up"),this.validation())))}}]),t}(a.Component)),Z=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(z.a)({},a,o))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.services.login(a,o).then(function(e){n.setState({username:"",password:""}),n.props.setTheUser(e),window.location.href="/map"}).catch(function(e){n.setState({error:e.response.data.message}),console.log("**** Error de login",e.response.data.message)})},n.state={username:"",password:"",error:!1},n.services=new F,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"validation",value:function(){if(console.log(this.state.error),!1!==this.state.error)return o.a.createElement("div",{className:"alert alert-warning"},o.a.createElement("p",null,this.state.error))}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-form"},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h1",null,"Log In"),o.a.createElement("form",{onSubmit:this.handleSubmit,action:"/map"},o.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:"form-control",id:"username",name:"username",placeholder:"User Name"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"}),o.a.createElement("button",{type:"submit"},"Log In"),this.validation(),o.a.createElement("div",{className:"login-link"},o.a.createElement("p",null,"Don't have an account yet ?"),o.a.createElement(D.b,{className:"signup-link",to:"/signup"},"Sign Up"))))))}}]),t}(a.Component),Q=n(39),X=(n(85),n(106)),$={position:"absolute",width:"100%",height:"100vh",zIndex:-10},ee=function(e){function t(e){var n;Object(l.a)(this,t);var a=(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).props.initialCenter,o=a.lat,r=a.lng;return n.state={currentLocation:{lat:o,lng:r}},n.styles=X,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var n=t.coords;e.setState({currentLocation:{lat:n.latitude,lng:n.longitude}})}),this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&this.loadMap(),t.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google,t=e.maps,n=this.refs.map,a=s.a.findDOMNode(n),o=this.props.zoom,r=this.state.currentLocation,l=r.lat,i=r.lng,c=new e.maps.StyledMapType(this.styles,{name:"Styled Map"}),u=new t.LatLng(l,i),m=Object.assign({},{disableDefaultUI:!0,center:u,zoom:o});this.map=new t.Map(a,m),this.map.mapTypes.set("styled_map",c),this.map.setMapTypeId("styled_map")}}},{key:"randomRoom",value:function(){var e=this.map,t=this.props.google.maps;if(!this.props.randomRoom.location)return null;var n=this.props.randomRoom.location.latitude,a=this.props.randomRoom.location.longitude;if(e){var o=new t.LatLng(n,a);e.panTo(o)}}},{key:"recenterMap",value:function(){var e=this.map,t=this.state.currentLocation,n=this.props.google.maps;if(e){var a=new n.LatLng(t.lat,t.lng);e.panTo(a)}}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return o.a.Children.map(t,function(t){if(t)return o.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})})}},{key:"render",value:function(){var e=Object.assign({},$);return this.props.randomRoom&&this.randomRoom(),o.a.createElement("div",null,o.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(o.a.Component),te=ee;ee.defaultProps={zoom:4,initialCenter:{lat:43.915491,lng:6.972054},centerAroundCurrentLocation:!1,visible:!0};n(186);var ne=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(z.a)({},a,o),function(){n.props.search(n.state.search)})},n.state={search:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return o.a.createElement("div",{className:"search-bar"},o.a.createElement("input",{className:"search-input",type:"text",name:"search",value:this.state.search,onChange:this.handleChange,placeholder:"Search"}),o.a.createElement("button",{className:"search-icon",type:"submit"},o.a.createElement(f.a,{className:"search",icon:"search"})))}}]),t}(a.Component),ae=n(11),oe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).infoWindowRef=o.a.createRef(),n.onInfoWindowOpen=n.onInfoWindowOpen.bind(Object(ae.a)(Object(ae.a)(n))),n.containerElement||(n.containerElement=document.createElement("div")),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onInfoWindowOpen",value:function(){s.a.render(o.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return o.a.createElement(Q.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(a.Component),re=n(15),se=function(e){function t(e){var n;return Object(l.a)(this,t),console.log("Patata"),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSearch=function(e){n.props.search(e),n.handleWindow()},n.handleWindow=function(){n.props.onClose()},n.getTags=function(){return n.props.state.selectedRoom?n.props.state.selectedRoom.tags?n.props.state.selectedRoom.tags.map(function(e){return"#"===e[0]?o.a.createElement("button",{key:"0",className:"info-window-tag",onClick:function(){return n.handleSearch(e)}},e):o.a.createElement("button",{key:"1",className:"info-window-tag",onClick:function(){return n.handleSearch(e)}},"#".concat(e," "))}):"The room has no tags":null},n.setFollowButton=function(){return n.props.user?n.props.user.following.includes(n.state.selectedRoom._id)?o.a.createElement("button",{className:"info-window-btn",onClick:function(){return n.unfollowRoom()}},"Unfollow"):o.a.createElement("button",{className:"info-window-btn info-window-following",onClick:function(){return n.followRoom()}},"Follow"):null},n.unfollowRoom=function(){n.props.state.selectedRoom.followers&&Object(P.a)(n.state.selectedRoom.followers).splice(n.state.selectedRoom.followers.indexOf(n.props.user._id),1),n.props.user.following.splice(n.props.user.following.indexOf(n.props.state.selectedRoom._id),1),n.props.state.selectedRoom.followers.pop(),n.userServices.updateFollowing(n.state.selectedRoom._id,n.props.user._id,"unfollow").then(function(){return console.log("------------------------------------unfollow------------------------------")}),n.props.update()},n.followRoom=function(){var e=[];n.props.state.selectedRoom.followers&&n.props.state.selectedRoom.followers.length?((e=Object(P.a)(n.state.selectedRoom.followers)).push(n.props.user._id),console.log("NEWWWW",e)):e.push(n.props.user._id),console.log("NEWWWW",e),console.log(n.state.selectedRoom.followers),console.log(n.state.selectedRoom),n.props.user.following.push(n.state.selectedRoom._id),n.props.state.selectedRoom.followers.push("enga\xf1o"),n.userServices.updateFollowing(n.state.selectedRoom._id,n.props.user._id,"follow").then(function(){return console.log("------------------------------------follow------------------------------")}).catch(function(){return console.log("-------------------------------------------CATCH----------------------------")}),n.props.update()},n.enterRoom=function(){window.location.href="/room/".concat(n.state.selectedRoom._id)},n.state={selectedRoom:n.props.state.selectedRoom},n.roomServices=new h,n.userServices=new g,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"info-window"},o.a.createElement("div",{className:"info-window-img"},o.a.createElement("img",{src:this.props.state.selectedRoom.imageUrl,alt:this.props.state.selectedRoom.roomname})),o.a.createElement("div",{className:"info-window-content"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(f.a,{className:"icon-home",icon:re.c}),o.a.createElement("span",{className:"roomname"},this.props.state.selectedRoom.roomname),o.a.createElement(f.a,{className:"icon-user",icon:"user"}),o.a.createElement("span",{className:"owner"},this.props.state.selectedRoomOwner)),o.a.createElement("li",null,o.a.createElement(f.a,{className:"icon",icon:re.f}),o.a.createElement("span",null,this.props.state.selectedRoom.description)),o.a.createElement("li",null,o.a.createElement(f.a,{className:"icon",icon:re.g}),o.a.createElement("span",null,this.getTags()," ")),o.a.createElement("li",null,o.a.createElement(f.a,{className:"icon",icon:re.i}),console.log(this.state.selectedRoom.followers),o.a.createElement("span",null,this.props.state.selectedRoom.followers?this.props.state.selectedRoom.followers.length:"0"," followers"))),o.a.createElement("button",{type:"button",className:"info-window-btn",onClick:this.enterRoom},"Enter room"),this.setFollowButton(),o.a.createElement("button",{className:"info-window-btn",dir:"/room/"+this.props.state.selectedRoom.id},"Like")))}}]),t}(a.Component),le=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).update=function(){console.log("1234567891234567890912345678901234567890"),n.services.getAllRooms().then(function(e){return n.setState({Rooms:e})}).then(function(){return n.setState({filteredRooms:n.state.Rooms})})},n.displayMarkers=function(){var e={path:n.props.google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"tomato",strokeColor:"tomato",fill:"tomato",fillOpacity:.8,strokeWeight:2};return n.state.filteredRooms.map(function(t){return t.location?o.a.createElement(Q.Marker,{key:t._id,id:t._id,room:t,position:{lat:t.location.latitude,lng:t.location.longitude},icon:e,onClick:n.onMarkerClick}):null})},n.displayButton=function(){return n.props.userInSession?0===n.props.userInSession.room.length?o.a.createElement(D.b,{className:"map-buttons",to:"/create",user:n.props.userInSession},"Create room"):o.a.createElement(D.b,{className:"map-buttons",to:"/room/".concat(n.getUserRoom())},"Go to your room"):o.a.createElement(D.b,{className:"map-buttons",to:"/login"},"Create a room")},n.pickRandom=function(e){var t=Math.floor(Math.random()*(n.state.Rooms.length-0))+0,a=n.state.Rooms[t];n.setState({selectedRoom:a})},n.onMarkerClick=function(e,t,a){console.log(e,t,a),n.userServices.getOneUser(e.room.owner).then(function(a){n.setState({selectedRoom:e.room,activeMarker:t,selectedRoomOwner:a.username,showingInfoWindow:!0,displayViewButton:!0})})},n.checkUser=function(){n.setState({})},n.checkRooms=function(){return n.state.Rooms},n.search=function(e){var t=Object(P.a)(n.state.Rooms);t=t.filter(function(t){return t.roomname.toLowerCase().includes(e.toLowerCase())}),n.setState({filteredRooms:t})},n.onClose=function(){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null,displayViewButton:!1,selectedRoom:"",selectedRoomOwner:""})},n.state={showingInfoWindow:!1,activeMarker:{},selectedRoom:"",selectedRoomOwner:"",displayViewButton:!1,Rooms:[],filteredRooms:[]},n.services=new h,n.userServices=new g,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.update()}},{key:"getUserRoom",value:function(){return this.props.userInSession.room[0]}},{key:"hideWindow",value:function(){this.setState({showingInfoWindow:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"map-container"},o.a.createElement(ne,{search:this.search}),o.a.createElement(te,{randomRoom:this.state.selectedRoom,centerAroundCurrentLocation:!0,google:this.props.google},this.displayMarkers(),o.a.createElement(oe,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose,className:"info-window-main"},o.a.createElement(se,{update:this.update,state:this.state,user:this.props.userInSession,search:this.search,onClose:this.onClose}))),o.a.createElement("div",{className:"map-menu"},o.a.createElement("button",{type:"submit",className:"map-buttons",onClick:this.pickRandom},"Random room"),this.displayButton()))}}]),t}(a.Component),ie=Object(Q.GoogleApiWrapper)({apiKey:"AIzaSyC9-z5odg8Pfi0AMseMq_6KocFN09_9FSw"})(le),ce=n(30),ue=(n(187),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState({room:Object(ce.a)({},n.state.room,Object(z.a)({},a,o))})},n.handleHiddenChange=function(e,t){n.setState(function(e){return{hidden:t,open:!t&&e.open}})},n.handleSubmit=function(e){e.preventDefault();var t=n.state.room.tags;n.getHashTags(t),n.services.postRoom(n.state.room).then(function(e){console.log(e),window.location.href="/room/".concat(e._id)})},n.state={room:{roomname:"",description:"",location:{latitude:void 0,longitude:void 0},tags:[],followers:[],owner:void 0},hidden:!1},n.handleSubmit=n.handleSubmit.bind(Object(ae.a)(Object(ae.a)(n))),n.services=new h,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.currentLocation(),this.getOwnerId()}},{key:"getOwnerId",value:function(){var e=this;console.log("getOwnerId -> El Id de usuario es:",this.props.userInSession._id),this.setState(Object(ce.a)({},this.state,{room:Object(ce.a)({},this.state.room,{owner:this.props.userInSession._id})}),function(){return console.log("getOwnerId -> El estado es:",e.state.room)})}},{key:"currentLocation",value:function(){var e=this;navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var n=t.coords;e.setState(Object(ce.a)({},e.state,{room:Object(ce.a)({},e.state.room,{location:Object(ce.a)({},e.state.room.location,{latitude:n.latitude,longitude:n.longitude})})}))})}},{key:"getHashTags",value:function(e){for(var t,n=/(?:^|\s)(?:#)([a-zA-Z\d]+)/gm,a=[];t=n.exec(e);)a.push(t[1]);console.log(a)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"create-form"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("h1",null,"Create a room"),o.a.createElement("input",{onChange:this.handleChange,value:this.state.room.roomname,type:"text",className:"form-control",id:"roomname",name:"roomname",placeholder:"Name your room"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.room.description,type:"text",className:"form-control",id:"description",name:"description",placeholder:"Describe your room"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.room.tags,type:"text",className:"form-control",id:"tags",name:"tags",placeholder:"Tags"}),o.a.createElement("button",{type:"submit"},"Create"))))}}]),t}(a.Component)),me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).logout=function(){n.service.logout().then(function(e){console.log("esto "+n.closeButton),n.props.setTheUser(null)})},n.service=new F,n.closeButton=document.getElementsByClassName("close-hamb")[0],n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.userInSession?o.a.createElement("div",{className:"pepe"},o.a.createElement("div",{className:"logo-type-hamb"},o.a.createElement(D.b,{to:"/map"},o.a.createElement(f.a,{className:"logo",icon:"person-booth"})),o.a.createElement(D.b,{to:"/map"},o.a.createElement("h3",null,"ROOMS"))),o.a.createElement("nav",{role:"navigation"},o.a.createElement("div",{id:"menuToggle"},o.a.createElement("input",{className:"close-hamb",type:"checkbox"}),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("ul",{id:"menu"},o.a.createElement("li",null,o.a.createElement(D.b,{to:"/profile"},"Your Profile")),o.a.createElement("li",null," ",o.a.createElement(D.b,{to:"/map"},o.a.createElement("div",{onClick:this.logout},"Sign Out"))))))):o.a.createElement("div",{className:"pepe"},o.a.createElement("div",{className:"logo-type-hamb"},o.a.createElement(D.b,{to:"/map"},o.a.createElement(f.a,{className:"logo",icon:"person-booth"})),o.a.createElement(D.b,{to:"/map"},o.a.createElement("h3",null,"ROOMS"))),o.a.createElement("nav",{role:"navigation"},o.a.createElement("div",{id:"menuToggle"},o.a.createElement("input",{type:"checkbox"}),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("ul",{id:"menu"},o.a.createElement("li",null,o.a.createElement(D.b,{to:"/profile"},"Your Profile")),o.a.createElement("li",null," ",o.a.createElement(D.b,{to:"/login"},"Log In"))))))}}]),t}(a.Component),pe=n(37),de=n(47),he=n.n(de),ge=(a.Component,function e(){var t=this;Object(l.a)(this,e),this.getAllCoasters=function(){return t.service.get("getAllCoasters",{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.getOneCoaster=function(e){return t.service.get("getOneCoaster/".concat(e),{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.postCoaster=function(e){return t.service.post("newCoaster",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.handleUpload=function(e){return t.service.post("/upload",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.service=d.a.create({baseURL:"http://localhost:3000/api/"})}),fe=n(107),ve=n.n(fe),be=(n(221),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setUser=function(e){return n.setState({loggedInUser:e})},n.state={loggedInUser:null,modalShow:!1,modal:!1,displayInfo:!0},n.services=new ge,n.handleClick=n.handleClick.bind(Object(ae.a)(Object(ae.a)(n))),n.setUser=n.setUser.bind(Object(ae.a)(Object(ae.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(){this.setState({modalShow:!0}),console.log(this.state.modalShow)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"rooms-index"},o.a.createElement("div",{className:"index-info"},o.a.createElement("img",{src:ve.a,alt:"rooms"}),o.a.createElement("p",null,"It\u2019s a social media streaming platform that shares your room with the world\u2026")),o.a.createElement("div",{className:"search-container"},o.a.createElement(D.b,{to:"/map",className:"search glitch"},o.a.createElement(f.a,{icon:"search"}))),o.a.createElement("div",{className:"login"},console.log("este es el loggedinuser de index "+this.state.loggedInUser),this.props.userInSession?null:o.a.createElement(D.b,{className:"button-login",to:"/login"},"Log In"))))}}]),t}(a.Component)),Ee=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).setUser=function(e){return n.setState({loggedInUser:e})},n.fetchUser=function(){null===n.state.loggedInUser&&n.services.loggedin().then(function(e){return n.setState({loggedInUser:e})}).catch(function(e){return n.setState({loggedInUser:!1})})},n.state={loggedInUser:null},n.services=new F,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log("este es el loggedInUser en app"+this.state.loggedInUser),this.fetchUser(),this.state.loggedInUser?o.a.createElement("div",null,o.a.createElement(me,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement(Y,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement(G.d,null,o.a.createElement(G.b,{path:"/",exact:!0,render:function(){return o.a.createElement(be,{userInSession:e.state.loggedInUser,setUser:e.setUser})}}),o.a.createElement(J,{path:"/profile",user:this.state.loggedInUser,component:K}),o.a.createElement(G.b,{path:"/room/:id",component:A}),o.a.createElement(G.b,{path:"/map",render:function(){return o.a.createElement(ie,{userInSession:e.state.loggedInUser,setUser:e.setUser})}}),o.a.createElement(G.b,{path:"/create",render:function(){return o.a.createElement(ue,{userInSession:e.state.loggedInUser,setUser:e.setUser})}}),o.a.createElement(G.b,{path:"/chat",userInSession:this.state.loggedInUser,component:_}))):o.a.createElement("div",null,o.a.createElement(me,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement(Y,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement(G.d,null,o.a.createElement(G.b,{path:"/",exact:!0,render:function(){return o.a.createElement(be,{userInSession:e.state.loggedInUser,setUser:e.setUser})}}),o.a.createElement(J,{user:this.state.loggedInUser,path:"/profile",component:K}),o.a.createElement(G.b,{path:"/map",render:function(){return o.a.createElement(ie,{userInSession:e.state.loggedInUser,setUser:e.setUser})}}),o.a.createElement(G.b,{path:"/room/:id",component:A}),o.a.createElement(G.b,{path:"/chat",userInSession:this.state.loggedInUser,component:_}),o.a.createElement(G.b,{path:"/signup",render:function(){return o.a.createElement(q,{setTheUser:e.setUser})}}),o.a.createElement(G.b,{path:"/login",render:function(){return o.a.createElement(Z,{setTheUser:e.setUser})}})))}}]),t}(a.Component);pe.b.add(re.e,re.d,re.b,re.h,re.a),s.a.render(o.a.createElement(D.a,null,o.a.createElement(Ee,null)),document.getElementById("root"))},62:function(e,t,n){e.exports=n.p+"static/media/rooms-r-white.1eb47685.svg"},70:function(e,t,n){},71:function(e,t,n){},85:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.8e840ee6.chunk.js.map